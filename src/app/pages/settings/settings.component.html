<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
  <h1 class="h2">Settings</h1>
  <div class="btn-toolbar mb-2 mb-md-0">
    <div class="btn-group me-2">
      <ul class="nav nav-pills m-3" id="pills-tab" role="tablist">
        @for(navbarLink of navbarLinks; track navbarLink.name) {
          <li class="nav-item mr-2" role="presentation">
              <button [class]="navbarLink.selected ? 'nav-link active btn-sm' : 'nav-link btn-sm'" [id]="navbarLink.id" data-bs-toggle="pill" [attr.data-bs-target]="navbarLink.target" type="button" role="tab" [attr.aria-controls]="navbarLink.controls" [attr.aria-selected]="navbarLink.selected" [disabled]="navbarLink.disabled">{{navbarLink.name}}</button>
          </li>
        }
      </ul>
    </div>
  </div>
</div>

<div *ngIf="!loading" class="tab-content tab-grow" id="pills-tabContent">
  <div *ngIf="savingChangesError !== ''" class="alert alert-danger d-flex align-items-center justify-content-center text-center" role="alert">
    <h4><i class="bi bi-exclamation-triangle m-2"></i></h4>&nbsp;&nbsp;
    <div>
      {{savingChangesError}}
    </div>
  </div>

  <div *ngIf="successMessage !== ''" class="alert alert-success d-flex align-items-center justify-content-center text-center" role="alert">
    <h4><i class="bi bi-check-circle m-2"></i></h4>&nbsp;&nbsp;
    <div>
      {{ successMessage }}
    </div>
  </div>

  <div class="tab-pane fade show active" id="pills-general" role="tabpanel" aria-labelledby="pills-general-tab" tabindex="0">
    <div class="row g-5 p-3">
      <div class="col-md-12 col-lg-12">
        <h4 class="mb-3">Monerod</h4>

        <div class="col-md-12">
          <label for="general-monerod-path-control" class="form-label">Monerod path</label>
          <div class="input-group mb-3">
            <input id="general-monerod-path-control" type="text" class="form-control form-control-sm" placeholder="" aria-label="Monerod path" aria-describedby="basic-addon2" [value]="currentSettings.monerodPath" readonly>
            <span class="input-group-text" id="basic-addon2"><button type="button" class="btn btn-secondary btn-sm" (click)="chooseMonerodFile()"><i class="bi bi-filetype-exe"></i> Choose executable</button></span>            
            <span class="input-group-text" id="basic-addon3"><button type="button" class="btn btn-secondary btn-sm" (click)="removeMonerodFile()" [disabled]="currentSettings.monerodPath === ''"><i class="bi bi-file-x"></i> Remove</button></span>
          </div>
          <small class="text-body-secondary">Path to monerod executable</small>
        </div>

        <hr class="my-4">
        <h4 class="mb-3">Config file</h4>

        <div class="row g-3">

          <div class="col-md-6">
            <label for="import-config-file" class="form-label">Import config file</label>
            <div class="input-group mb-3">
              <button [disabled]="!canImportConfigFile" type="button" class="btn btn-secondary btn-sm" (click)="importMonerodConfigFile()"><i class="bi bi-box-arrow-in-down"></i> Import</button>
            </div>
            <small class="text-body-secondary">Import custom monerod config file</small>
          </div>
          
          <div class="col-md-6">
            <label for="export-config-file" class="form-label">Export config file</label>
            <div class="input-group mb-3">
              <button [disabled]="!canExportConfigFile" type="button" class="btn btn-secondary btn-sm" (click)="exportMonerodConfigFile()"><i class="bi bi-box-arrow-up-right"></i> Export</button>
            </div>
            <small class="text-body-secondary">Export current saved settings to config file</small>
          </div>

        </div>

        <hr class="my-4">
        <h4 class="mb-3">Ban</h4>

        <div class="col-md-12">
          <div class="form-check form-switch col-md-6">
            <label for="general-remote-ban-list" class="form-check-label">Remote ban list</label>
            <input [disabled]="!canAddBanList" class="form-control form-check-input" type="checkbox" role="switch" id="general-remote-ban-list" [checked]="remoteBanList" [(ngModel)]="remoteBanList" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Specify a remote URL for download ban list</small>
          </div>
        </div>
        
        <br>

        <div *ngIf="!remoteBanList" class="col-md-12">
          <label for="general-ban-list-file" class="form-label">Ban list file</label>
          <div class="input-group mb-3">
            <input [disabled]="!canAddBanList" id="general-ban-list-file" type="text" class="form-control form-control-sm" placeholder="" aria-label="Ban list file path" aria-describedby="basic-addon3" [value]="currentSettings.banList" readonly>
            <span class="input-group-text" id="basic-addon3"><button [disabled]="!canAddBanList" type="button" class="btn btn-secondary btn-sm" (click)="chooseBanListFile()"><i class="bi bi-filetype-txt"></i> Choose File</button></span>
            <span class="input-group-text" id="basic-addon3"><button [disabled]="!canAddBanList" type="button" class="btn btn-secondary btn-sm" (click)="removeBanListFile()" [disabled]="currentSettings.banList === ''"><i class="bi bi-file-x"></i> Remove</button></span>           
          </div>
          <small class="text-body-secondary">Specify ban list file, one IP address per line. It is <strong>not recommended</strong> to statically ban any IP addresses unless you absolutely need to. Banning IPs often excludes the most vulnerable users who are forced to operate entirely behind Tor or other anonymity networks</small>
        </div>

        <div *ngIf="remoteBanList" class="col-md-12">
          <label for="general-ban-list-url" class="form-label">Ban list URL</label>
          <div class="input-group mb-3">
            <input [disabled]="!canAddBanList" id="general-ban-list-url" type="text" class="form-control form-control-sm" placeholder="https://gui.xmr.pm/files/block.txt" aria-label="Ban list file url" aria-describedby="basic-addon3" [(ngModel)]="banListUrl"  [ngModelOptions]="{standalone: true}">
            <span class="input-group-text" id="basic-addon3"><button [disabled]="!canAddBanList" type="button" class="btn btn-secondary btn-sm" (click)="downloadBanListFile()" [disabled]="!validBanListUrl"><i class="bi bi-filetype-txt"></i> Download</button></span>            
          </div>          
          
          <small class="text-body-secondary">Specify ban list file, one IP address per line. It is <strong>not recommended</strong> to statically ban any IP addresses unless you absolutely need to. Banning IPs often excludes the most vulnerable users who are forced to operate entirely behind Tor or other anonymity networks</small>
        </div>

      </div>
    </div>
  </div>

  <div class="tab-pane fade" id="pills-node" role="tabpanel" aria-labelledby="pills-node-tab" tabindex="0">
    <div class="row g-5 p-3">
      <div class="col-md-12 col-lg-12">
        <h4 class="mb-3">Node</h4>

        <div class="row gy-3">
          <div class="col-md-6">
            <label for="max-concurrency" class="form-label">Max concurrency</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="max-concurrency" placeholder="0" [(ngModel)]="currentSettings.maxConcurrency" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Max number of threads to use for a parallel job</small>
          </div>

          <div class="col-md-6">
            <label for="max-connections-per-ip" class="form-label">Max connections per IP</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="max-connections-per-ip" placeholder="1" [(ngModel)]="currentSettings.maxConnectionsPerIp" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Maximum number of connections allowed from the same IP address</small>
          </div>

          <div *ngIf="!isPortable" class="form-check form-switch col-md-4">
            <label for="start-at-login" class="form-check-label">Start at login</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="start-at-login" [checked]="currentSettings.startAtLogin" [(ngModel)]="currentSettings.startAtLogin" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Start monero daemon at login</small>
          </div>

          <div *ngIf="!isPortable" class="form-check form-switch col-md-4">
            <label for="start-minimized" class="form-check-label">Start minimized</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="start-minimized" [checked]="currentSettings.startAtLoginMinimized" [(ngModel)]="currentSettings.startAtLoginMinimized" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Start monero daemon at login as tray icon</small>
          </div>

          <div class="form-check form-switch col-md-4">
            <label for="regtest" class="form-check-label">Regtest</label>
            <input class="form-control form-check-input" type="checkbox" role="switch" id="regtest" [checked]="currentSettings.regtest" [(ngModel)]="currentSettings.regtest" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Run monerod in a regression testing mode</small>
          </div>

          <div class="col-md-12">
            <label for="data-dir" class="form-label">Data dir</label>
            <div class="input-group mb-3">
              <input [disabled]="!canEditNodeSettings" id="data-dir" type="text" class="form-control form-control-sm" placeholder="" aria-label="Data dir" aria-describedby="basic-addon2" [value]="currentSettings.dataDir" readonly>
              <span class="input-group-text" id="basic-addon2"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="chooseDataDir()"><i class="bi bi-folder"></i> Choose folder</button></span>            
              <span class="input-group-text" id="basic-addon3"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="removeDataDir()" [disabled]="currentSettings.dataDir === ''"><i class="bi bi-folder-x"></i> Remove</button></span>
            </div>
            <small class="text-body-secondary">Specify data directory</small>
          </div>

        </div>

        <hr class="my-4">
        <h4 class="mb-3">Proxy/DNS</h4>

        <div class="row g-3">

          <div class="col-12">
            <label for="proxy" class="form-label">Proxy</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="proxy" placeholder="socks-ip:port" [(ngModel)]="currentSettings.proxy" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Network communication through proxy</small>
          </div>

          <div class="form-check form-switch col-md-6">
            <label for="proxy-allow-dns-leaks" class="form-check-label">Allow DNS leaks</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="proxy-allow-dns-leaks" [checked]="currentSettings.proxyAllowDnsLeaks" [(ngModel)]="currentSettings.proxyAllowDnsLeaks" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Allow DNS leaks outside of proxy</small>
          </div>
  
  
          <div class="form-check form-switch col-md-6">
            <label for="enforce-dns-checkpointing" class="form-check-label">Enforce DNS checkpointing</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="enforce-dns-checkpointing" [checked]="currentSettings.enforceDnsCheckpointing" [(ngModel)]="currentSettings.enforceDnsCheckpointing" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Checkpoints from DNS server will be enforced</small>
          </div>
  
  
          <div class="form-check form-switch col-md-6">
            <label for="disable-dns-checkpoints" class="form-check-label">Disable DNS checkpoints</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="disable-dns-checkpoints" [checked]="currentSettings.disableDnsCheckpoints" [(ngModel)]="currentSettings.disableDnsCheckpoints" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Do not retrieve checkpoints from DNS</small>
          </div>
  
  
          <div class="form-check form-switch col-md-6">
            <label for="enable-dns-blocklist" class="form-check-label">Enable DNS blocklist</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="enable-dns-blocklist" [checked]="currentSettings.enableDnsBlocklist" [(ngModel)]="currentSettings.enableDnsBlocklist" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Apply realtime blocklist from DNS</small>
          </div>
  
        </div>

        <hr class="my-4">
        <h4 class="mb-3">Battery</h4>

        <div class="row g-3">
          
          <div class="form-check form-switch col-md-6">
            <label for="run-on-battery" class="form-check-label">Run on battery</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="run-on-battery" [checked]="currentSettings.runOnBattery" [(ngModel)]="currentSettings.runOnBattery" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Enable monerod to run on battery power</small>
          </div>

          <div class="col-md-6">
            <label for="battery-threshold" class="form-label">Battery level threshold</label>
            <input [disabled]="!currentSettings.runOnBattery || !canEditNodeSettings" type="number" min="0" max="100" class="form-control" id="battery-threshold" placeholder="0" [(ngModel)]="currentSettings.batteryLevelThreshold" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Stop monerod when battery threshold is reached (0 to disable)</small>
          </div>
          
        </div>

        <hr class="my-4">
        <h4 class="mb-3">Updates</h4>

        <div class="row g-3">
                        
          <div class="col-md-6">
            <label for="check-updates" class="form-label">Check updates</label>
            <select [disabled]="!canEditNodeSettings" class="form-select" id="log-level" [(ngModel)]="currentSettings.checkUpdates" [ngModelOptions]="{standalone: true}">
              <option [ngValue]="'disabled'">Disabled</option>
              <option [ngValue]="'notify'">Notify</option>
              <option [ngValue]="'download'">Download</option>
              <option [ngValue]="'update'">Update</option>
            </select>
            <br>
            <small class="text-body-secondary">
              Check for new versions of monero
            </small>
          </div>

          <div class="form-check form-switch col-md-6">
            <label for="upgrade-automatically" class="form-check-label">Upgrade Automatically</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="upgrade-automatically" [checked]="currentSettings.upgradeAutomatically" [(ngModel)]="currentSettings.upgradeAutomatically" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Upgrade monerod automatically when a new version is available</small>
          </div>
          
          <div class="col-md-12">
            <label for="upgrade-download-path" class="form-label">Download path</label>
            <div class="input-group mb-3">
              <input [disabled]="!canEditNodeSettings" id="upgrade-download-path=" type="text" class="form-control form-control-sm" placeholder="" aria-label="Monerod path" aria-describedby="basic-addon2" [value]="currentSettings.downloadUpgradePath" readonly>
              <span class="input-group-text" id="basic-addon2"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="chooseMoneroDownloadPath()"><i class="bi bi-folder"></i> Choose folder</button></span>            
              <span class="input-group-text" id="basic-addon3"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="removeMoneroDownloadPath()" [disabled]="currentSettings.downloadUpgradePath === ''"><i class="bi bi-folder-x"></i> Remove</button></span>
            </div>
            <small class="text-body-secondary">Folder where to save updates</small>
          </div>

        </div>

      </div>
    </div>
  </div>

  <div class="tab-pane fade" id="pills-rpc" role="tabpanel" aria-labelledby="pills-rpc-tab" tabindex="0">
    <div class="row g-5 p-3">
      <div class="col-md-12 col-lg-12">
        <h4 class="mb-3">General</h4>
        <div class="row gy-3">

          <div class="form-check form-switch col-md-6">
            <label for="public-node" class="form-check-label">Public node</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="public-node" [checked]="currentSettings.publicNode" (change)="OnPublicNodeChange()">
            <br>
            <small class="text-body-secondary">Allow other users to use the node as a remote (restricted RPC mode, view-only commands) and advertise it over P2P</small>
          </div>

          <div class="form-check form-switch col-md-6">
            <label for="restricted-rpc" class="form-check-label">Restricted RPC</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="restricted-rpc" [checked]="currentSettings.restrictedRpc" (change)="OnRestrictedRPCChange()">
            <br>
            <small class="text-body-secondary">Restrict RPC to view-only commands and do not return privacy sensitive data in RPC calls</small>
          </div>

          <div class="form-check form-switch col-md-4">
            <label for="confirm-external-bind" class="form-check-label">Confirm external bind</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="confirm-external-bind" [checked]="currentSettings.confirmExternalBind" (change)="OnConfirmExternalBindChange()">
            <br>
            <small class="text-body-secondary">Confirm Bind IP is not a loopback (local) IP</small>
          </div>

          <div class="form-check form-switch col-md-4">
            <label for="rpc-ignore-ipv4" class="form-check-label">Ignore IPv4</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="rpc-ignore-ipv4" [checked]="currentSettings.rpcIgnoreIpv4" (change)="OnIgnoreIPv4Change()">
            <br>
            <small class="text-body-secondary">Ignore unsuccessful IPv4 bind for RPC</small>
          </div>

          <div class="form-check form-switch col-md-4">
            <label for="disable-rpc-ban" class="form-check-label">Disable ban</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="disable-rpc-ban" [checked]="currentSettings.disableRpcBan" (change)="OnDisableRpcBanChange()">
            <br>
            <small class="text-body-secondary">Do not ban hosts on RPC errors</small>
          </div>

          <div class="col-md-6">
            <label for="rpc-bind-ip" class="form-label">Bind IP</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="rpc-bind-ip" placeholder="127.0.0.1" [(ngModel)]="currentSettings.rpcBindIp" [ngModelOptions]="{standalone: true}" >
            <small class="text-body-secondary">Specify IP to bind RPC server</small>
          </div>

          <div class="col-md-6">
            <label for="rpc-bind-port" class="form-label">Bind port</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="rpc-bind-port" placeholder="18081" [(ngModel)]="currentSettings.rpcBindPort" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">18081 for mainnet, 28081 for testnet, 38081 for stagenet</small>
          </div>

        </div>

        <hr class="my-4">

        <div class="row g-3">
          <h4 class="mb-3">Authentication</h4>
          <div class="col-sm-6">
            <label for="rpc-login-user" class="form-label">Username</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="rpc-login-user" placeholder="" [(ngModel)]="rpcLoginUser" [ngModelOptions]="{standalone: true}" (change)="onRpcLoginChange()">
            <small class="text-body-secondary">Specify username required for RPC server</small>
          </div>
  
          <div class="col-sm-6">
            <label for="rpc-login-password" class="form-label">Password</label>
            <input [disabled]="!canEditNodeSettings" type="password" class="form-control" id="rpc-login-password" placeholder="" [(ngModel)]="rpcLoginPassword" [ngModelOptions]="{standalone: true}" (change)="onRpcLoginChange()">
            <small class="text-body-secondary">Specify password required for RPC server</small>
          </div>

          <div class="col-sm-12">
            <label for="rpc-access-control-origins" class="form-label">Access control origins</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="rpc-access-control-origins" placeholder="" [(ngModel)]="currentSettings.rpcAccessControlOrigins" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Specify a comma separated list of origins to allow cross origin resource sharing</small>
          </div>
        </div>

        <hr class="my-4">

        <div class="row g-3">
          <h4 class="mb-3">IPv6</h4>

          <div class="form-check form-switch col-md-12">
            <label for="rpc-use-ipv6" class="form-check-label">Enabled</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="rpc-use-ipv6" [checked]="currentSettings.rpcUseIpv6" [(ngModel)]="currentSettings.rpcUseIpv6" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Allow IPv6 for RPC</small>
          </div>

          <div *ngIf="currentSettings.rpcUseIpv6" class="col-md-6">
            <label for="rpc-bind-ipv6-address" class="form-label">Bind IPv6 address</label>
            <input [disabled]="!canEditNodeSettings || !currentSettings.rpcUseIpv6" type="text" class="form-control" id="rpc-bind-ipv6-address" placeholder="::1" [(ngModel)]="currentSettings.rpcBindIpv6Address" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Specify IPv6 address to bind RPC server</small>
          </div>

          <div *ngIf="currentSettings.rpcUseIpv6" class="col-md-6">
            <label for="rpc-restricted-bind-ipv6-address" class="form-label">Restricted bind IPv6 address</label>
            <input [disabled]="!canEditNodeSettings || !currentSettings.rpcUseIpv6" type="text" class="form-control" id="rpc-restricted-bind-ipv6-address" placeholder="::1">
            <small class="text-body-secondary">Specify IPv6 address to bind restricted RPC server</small>
          </div>

        </div>

        <hr class="my-4">

        <div class="row g-3">
          <h4 class="mb-3">ZMQ</h4>

          <div class="form-check form-switch col-md-12">
            <label for="enable-zmq" class="form-check-label">Enabled</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="enable-zmq" [checked]="!currentSettings.noZmq" (change)="OnNoZmqChange()">
            <br>
            <small class="text-body-secondary">Enable ZMQ RPC Server</small>
          </div>

          <div *ngIf="!currentSettings.noZmq" class="col-md-4">
            <label for="zmq-rpc-bind-ip" class="form-label">Bind IP</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="zmq-rpc-bind-ip" placeholder="127.0.0.1" [(ngModel)]="currentSettings.zmqRpcBindIp" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">IP for ZMQ RPC Server to listen on</small>
          </div>

          <div *ngIf="!currentSettings.noZmq" class="col-md-2">
            <label for="zmq-rpc-bind-port" class="form-label">Bind port</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="zmq-rpc-bind-port" placeholder="18082" [(ngModel)]="currentSettings.zmqRpcBindPort" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">18082 for mainnet, 28082 for testnet, 38082 for stagenet</small>
          </div>

          <div *ngIf="!currentSettings.noZmq" class="col-md-6">
            <label for="zmq-pub" class="form-label">ZMQ Pub</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="zmq-pub" placeholder="tcp://ip:port or ipc://path" [(ngModel)]="currentSettings.zmqPub" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Address for ZMQ Pub</small>
          </div>

        </div>

        <hr class="my-4">

        <div class="row g-3">
          <h4 class="mb-3">Payment</h4>

          <div class="col-md-12">
            <label for="rpc-payment-address" class="form-label">Address</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="rpc-payment-address" [(ngModel)]="currentSettings.rpcPaymentAddress" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Restrict RPC to clients sending micropayment to this address</small>
          </div>

          <div class="col-md-4">
            <label for="rpc-payment-difficulty" class="form-label">Difficulty</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="rpc-payment-difficulty" placeholder="1000" [(ngModel)]="currentSettings.rpcPaymentDifficuly" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Restrict RPC to clients sending micropayment at this difficulty</small>
          </div>

          <div class="col-md-4">
            <label for="rpc-payment-credits" class="form-label">Credits</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="rpc-payment-credits" placeholder="100" [(ngModel)]="currentSettings.rpcPaymentCredits" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Restrict RPC to clients sending micropayment, yelds that many credits per payment</small>
          </div>

          <div class="form-check form-switch col-md-4">
            <label for="rpc-payment-allow-free-loopback" class="form-check-label">Allow free loopback</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="rpc-payment-allow-free-loopback" [checked]="currentSettings.allowLocalIp" [(ngModel)]="currentSettings.rpcPaymentAllowFreeLoopback" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Allow free access from the loopback address (ie, the local host)</small>
          </div>

        </div>

        <hr class="my-4">

        <div class="row g-3">
          <h4 class="mb-3">SSL</h4>
          
          <div class="col-md-4">
            <label for="rpc-ssl" class="form-label">SSL Mode</label>
            <select [disabled]="!canEditNodeSettings" class="form-select" id="rpc-ssl" [(ngModel)]="currentSettings.rpcSsl" [ngModelOptions]="{standalone: true}">
              <option [ngValue]="'autodetect'" [selected]="currentSettings.rpcSsl === 'autodetect'">Autodetect</option>
              <option [ngValue]="'enabled'" [selected]="currentSettings.rpcSsl === 'enabled'">Enabled</option>
              <option [ngValue]="'disabled'" [selected]="currentSettings.rpcSsl === 'disabled'">Disabled</option>
            </select>
          </div>


          <div class="form-check form-switch col-md-4">
            <label for="rpc-ssl-allow-chained" class="form-check-label">Allow chained</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="rpc-ssl-allow-chained" [checked]="currentSettings.rpcSslAllowChained" [(ngModel)]="currentSettings.rpcSslAllowChained" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Allow user chain certificates</small>
          </div>

          <div class="form-check form-switch col-md-4">
            <label for="rpc-ssl-allow-any-cert" class="form-check-label">Allow any cert</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="rpc-ssl-allow-any-cert" [checked]="currentSettings.rpcSslAllowAnyCert" [(ngModel)]="currentSettings.rpcSslAllowAnyCert" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Allow any peer certificate</small>
          </div>


          <div class="col-md-12">
            <label for="rpc-ssl-private-key" class="form-label">Private key</label>
            <div class="input-group mb-3">
              <input [disabled]="!canEditNodeSettings" id="rpc-ssl-private-key" type="text" class="form-control form-control-sm" placeholder="" aria-label="Monerod path" aria-describedby="basic-addon2" [value]="currentSettings.rpcSslPrivateKey" readonly>
              <span class="input-group-text" id="basic-addon2"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="selectSslPrivateKey()"><i class="bi bi-filetype-key"></i> Choose file</button></span>
              <span class="input-group-text" id="basic-addon3"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="removeSslPrivateKey()" [disabled]="currentSettings.rpcSslPrivateKey === ''"><i class="bi bi-file-x"></i> Remove</button></span>        
            </div>
            <small class="text-body-secondary">Path to a PEM format private key</small>
          </div>


          <div class="col-md-12">
            <label for="rpc-ssl-certificate" class="form-label">Certificate</label>
            <div class="input-group mb-3">
              <input [disabled]="!canEditNodeSettings" id="rpc-ssl-certificate" type="text" class="form-control form-control-sm" placeholder="" aria-label="RPC SSL Certificate" aria-describedby="basic-addon2" [value]="currentSettings.rpcSslCertificate" readonly>
              <span class="input-group-text" id="basic-addon2"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="selectSslCertificate()"><i class="bi bi-postcard"></i> Choose file</button></span>
              <span class="input-group-text" id="basic-addon3"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="removeSslCertificate()" [disabled]="currentSettings.rpcSslCertificate === ''"><i class="bi bi-file-x"></i> Remove</button></span>
            </div>
            <small class="text-body-secondary">Path to a PEM format certificate</small>
          </div>


          <div class="col-md-12">
            <label for="rpc-ssl-ca-certificates" class="form-label">CA Certificates</label>
            <div class="input-group mb-3">
              <input [disabled]="!canEditNodeSettings" id="rpc-ssl-ca-certificates" type="text" class="form-control form-control-sm" placeholder="" aria-label="RPC SSL CA Certificates" aria-describedby="basic-addon2" [value]="currentSettings.rpcSslCACertificates" readonly>
              <span class="input-group-text" id="basic-addon2"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="selectSslCACertificates()"><i class="bi bi-postcard"></i> Choose file</button></span>
              <span class="input-group-text" id="basic-addon3"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="removeSslCACertificates()" [disabled]="currentSettings.rpcSslCACertificates === ''"><i class="bi bi-file-x"></i> Remove</button></span>
            </div>
            <small class="text-body-secondary">Path to file containing concatenated PEM format certificate(s) to replace system CA(s)</small>
          </div>

        </div>

      </div>
    </div>
  </div>

  <div class="tab-pane fade" id="pills-p2p" role="tabpanel" aria-labelledby="pills-p2p-tab" tabindex="0">
    <div class="row g-5 p-3">
      <div class="col-md-12 col-lg-12">
        <h4 class="mb-3">General</h4>
        <div class="row gy-3">

          <div class="form-check form-switch col-md-6">
            <label for="allow-local-ip" class="form-check-label">Allow local IP</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="allow-local-ip" [checked]="currentSettings.allowLocalIp" [(ngModel)]="currentSettings.allowLocalIp" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Allow local ip add to peer list, mostly in debug process</small>
          </div>

          <div class="form-check form-switch col-md-6">
            <label for="p2p-ignore-ipv4" class="form-check-label">Ignore IPv4</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="p2p-ignore-ipv4" [checked]="currentSettings.p2pIgnoreIpv4" [(ngModel)]="currentSettings.p2pIgnoreIpv4">
            <br>
            <small class="text-body-secondary">Ignore unsuccessful IPv4 bind for P2P</small>
          </div>

          <div class="form-check form-switch col-md-6">
            <label for="hide-my-port" class="form-check-label">Hide my port</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="disable-dns-checkpoints" [checked]="currentSettings.hideMyPort" [(ngModel)]="currentSettings.hideMyPort" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Do not announce yourself as peerlist candidate</small>
          </div>

          <div class="form-check form-switch col-md-6">
            <label for="offline" class="form-check-label">Offline</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="offline" [checked]="currentSettings.offline" (change)="OnOfflineChange()">
            <br>
            <small class="text-body-secondary">Do not listen for peers, nor connect to any</small>
          </div>

          <div class="form-check form-switch col-md-6">
            <label for="no-igd" class="form-check-label">No IGD</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="no-igd" [checked]="currentSettings.noIgd" [(ngModel)]="currentSettings.noIgd" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Disable UPnP port mapping on the router (<strong>Internet Gateway Device</strong>). Enable this option to improve security if you are not behind a NAT (you can bind directly to public IP or you run through Tor)</small>
          </div>

          <div class="col-md-4">
            <label for="igd" class="form-label">IGD</label>
            <select [disabled]="currentSettings.noIgd || !canEditNodeSettings" class="form-select" id="igd" [(ngModel)]="currentSettings.igd" [ngModelOptions]="{standalone: true}">
              <option [ngValue]="'delayed'" [selected]="currentSettings.igd === 'delayed'">Delayed</option>
              <option [ngValue]="'enabled'" [selected]="currentSettings.igd === 'enabled'">Enabled</option>
              <option [ngValue]="'disabled'" [selected]="currentSettings.igd === 'disabled'">Disabled</option>
            </select>
          </div>

          <div class="col-md-6">
            <label for="p2p-bind-ip" class="form-label">Bind IP</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="p2p-bind-ip" placeholder="0.0.0.0" [(ngModel)]="currentSettings.p2pBindIp" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Interface for p2p network protocol</small>
          </div>

          <div class="col-md-3">
            <label for="p2p-bind-port" class="form-label">Bind port</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="p2p-bind-port" placeholder="18080" [(ngModel)]="currentSettings.p2pBindPort" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">18080 for mainnet, 28080 for testnet, 38080 for stagenet</small>
          </div>

          <div class="col-md-3">
            <label for="p2p-external-port" class="form-label">External port</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="p2p-external-port" placeholder="18080" [(ngModel)]="currentSettings.p2pExternalPort" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">External port for p2p network protocol (if port forwarding used with NAT)</small>
          </div>

          <hr class="my-4">
          
          <h4 class="mb-3">Limit Peers</h4>
          
          <div class="col-md-6">
            <label for="in-peers" class="form-label">In Peers</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="-1" class="form-control" id="in-peers" placeholder="-1" [(ngModel)]="currentSettings.inPeers" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Set max number of incoming connections (nodes actively connecting to you). By default unlimited. Value -1 represents the code default.</small>
          </div>
                    
          <div class="col-md-6">
            <label for="out-peers" class="form-label">Out Peers</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="-1" class="form-control" id="out-peers" placeholder="12" [(ngModel)]="currentSettings.outPeers" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Set max number of outgoing connections to other nodes. By default 12. Value -1 represents the code default.</small>
          </div>
          <hr class="my-4">
          
          <h4 class="mb-3">Network Rate</h4>
          
          <div class="col-md-6">
            <label for="limit-rate-up" class="form-label">Limit Rate Up</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="-1" class="form-control" id="limit-rate-up" placeholder="2048" [(ngModel)]="currentSettings.limitRateUp" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Set outgoing data transfer limit [kB/s]. By default 2048 kB/s. Value -1 represents the code default.</small>
          </div>
          
          <div class="col-md-6">
            <label for="limit-rate-down" class="form-label">Limit Rate Down</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="-1" class="form-control" id="limit-rate-down" placeholder="8192" [(ngModel)]="currentSettings.limitRateDown" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Set incoming data transfer limit [kB/s]. By default 8192 kB/s. Value -1 represents the code default.</small>
          </div>

          <hr class="my-4">
          
          <h4 class="mb-3">IPv6</h4>
          
          <div class="form-check form-switch col-md-12">
            <label for="p2p-use-ipv6" class="form-check-label">Enabled</label>
            <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="p2p-use-ipv6" [checked]="currentSettings.p2pUseIpv6" [(ngModel)]="currentSettings.p2pUseIpv6" [ngModelOptions]="{standalone: true}">
            <br>
            <small class="text-body-secondary">Allow IPv6 for P2P</small>
          </div>

          <div *ngIf="currentSettings.p2pUseIpv6" class="col-md-6">
            <label for="p2p-bind-ipv6-address" class="form-label">Bind IPv6 address</label>
            <input [disabled]="!canEditNodeSettings || !currentSettings.p2pUseIpv6" type="text" class="form-control" id="p2p-bind-ipv6-address" placeholder="::1" [(ngModel)]="currentSettings.p2pBindIpv6Address" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Specify IPv6 address to bind RPC server</small>
          </div>

          <div *ngIf="currentSettings.p2pUseIpv6" class="col-md-6">
            <label for="p2p-bind-port-ipv6" class="form-label">Bind IPv6 port</label>
            <input [disabled]="!canEditNodeSettings || !currentSettings.p2pUseIpv6" type="number" min="0" class="form-control" id="p2p-bind-port-ipv6" placeholder="18080" [(ngModel)]="currentSettings.p2pBindPortIpv6" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">18080 for mainnet, 28080 for testnet, 38080 for stagenet</small>
          </div>
          
          <hr class="my-4">
          
          <h4 class="mb-3">Seed Node</h4>

          <div class="col-md-8">
            <label for="seed-node-address" class="form-label">Node address</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="seed-node-address" [(ngModel)]="seedNodeAddress" (change)="onSeedNodeChange()" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Connect to a node to retrieve other nodes' addresses, and disconnect</small>
          </div>

          <div class="col-md-4">
            <label for="seed-node-port" class="form-label">Node port</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="seed-node-port" placeholder="18080" (change)="onSeedNodeChange()" [(ngModel)]="seedNodePort" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Specify node port</small>
          </div>

          <hr class="my-4">
          <h4 class="mb-3">Peers</h4>

          <div class="col-md-12">
            <button [disabled]="!canRemovePeers || !canEditNodeSettings" id="remove-selected-peers" type="button" class="btn btn-primary" (click)="removeSelectedPeers()"><i class="bi bi-trash-fill"></i></button>
            <br><br>
            <table
              [hidden]="currentSettings.peers.length === 0"
              id="peersTable"
              data-toggle="peersTable"
              data-max-height="300"
              data-card-view="true">
              <thead>
                <tr>
                  <th data-field="state" data-checkbox="true">ID</th>
                  <th data-field="address">Address</th>
                  <th data-field="port">Port</th>
                </tr>
              </thead>
            </table>
          </div>

          <div class="col-md-6">
            <label for="add-peers-address" class="form-label">Peer address</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="add-peers-address" [(ngModel)]="peerAddress" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Add node to local peer list</small>
          </div>

          <div class="col-md-4">
            <label for="add-peers-port" class="form-label">Peer port</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="add-peers-port" placeholder="18080" [(ngModel)]="peerPort" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Specify node port</small>
          </div>

          <div class="col-md-2">
            <label class="form-label">Add</label>
            <button [disabled]="!canAddPeer || !canEditNodeSettings" type="button" class="form-control btn btn-primary" (click)="addPeer()"><i class="bi bi-plus-square"></i></button>
          </div>

          <hr class="my-4">

          <h4 class="mb-3">Exclusive Nodes</h4>

          <div class="col-md-12">
            <button [disabled]="!canRemoveExclusiveNodes || !canEditNodeSettings" id="remove-selected-exclusive-node" type="button" class="btn btn-primary" (click)="removeSelectedExclusiveNodes()"><i class="bi bi-trash-fill"></i></button>
            <br><br>
            <table
              [hidden]="currentSettings.exclusiveNodes.length === 0"
              id="exclusiveNodesTable"
              data-toggle="exclusiveNodesTable"
              data-max-height="300"
              data-card-view="true">
              <thead>
                <tr>
                  <th data-field="state" data-checkbox="true">ID</th>
                  <th data-field="address">Address</th>
                  <th data-field="port">Port</th>
                </tr>
              </thead>
            </table>
          </div>

          <div class="col-md-6">
            <label for="add-exclusive-node-address" class="form-label">Node address</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="add-exclusive-node-address" [(ngModel)]="exclusiveNodeAddress" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Specify a node to connect to only</small>
          </div>

          <div class="col-md-4">
            <label for="add-exclusive-node-port" class="form-label">Node port</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="add-exclusive-node-port" placeholder="18080" [(ngModel)]="exclusiveNodePort" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Specify node port</small>
          </div>

          <div class="col-md-2">
            <label class="form-label">Add</label>
            <button [disabled]="!canAddExclusiveNode || !canEditNodeSettings" type="button" class="form-control btn btn-primary" (click)="addExclusiveNode()"><i class="bi bi-plus-square"></i></button>
          </div>

          <hr class="my-4">
          
          <h4 class="mb-3">Priority Nodes</h4>

          <div class="col-md-12">
            <button [disabled]="!canRemovePriorityNodes || !canEditNodeSettings" id="remove-selected-priority-node" type="button" class="btn btn-primary" (click)="removeSelectedPriorityNodes()"><i class="bi bi-trash-fill"></i></button>
            <br><br>
            <table
            [hidden]="currentSettings.priorityNodes.length === 0"
              id="priorityNodesTable"
              data-toggle="priorityNodesTable"
              data-max-height="300"
              data-card-view="true">
              <thead>
                <tr>
                  <th data-field="state" data-checkbox="true">ID</th>
                  <th data-field="address">Address</th>
                  <th data-field="port">Port</th>
                </tr>
              </thead>
            </table>
          </div>

          <div class="col-md-6">
            <label for="add-priority-node-address" class="form-label">Node address</label>
            <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="add-priority-node-address" placeholder="" [(ngModel)]="priorityNodeAddress" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Specify a node to connect to only and then attempt to keep the connection open.</small>
          </div>

          <div class="col-md-4">
            <label for="add-priority-node-port" class="form-label">Node port</label>
            <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="add-priority-node-port" placeholder="18080" [(ngModel)]="priorityNodePort" [ngModelOptions]="{standalone: true}">
            <small class="text-body-secondary">Specify node port</small>
          </div>

          <div class="col-md-2">
            <label class="form-label">Add</label>
            <button [disabled]="!canAddPriorityNode || !canEditNodeSettings" type="button" class="form-control btn btn-primary" (click)="addPriorityNode()"><i class="bi bi-plus-square"></i></button>
          </div>


      </div>
    </div>
  </div>
  </div>

  <div class="tab-pane fade" id="pills-blockchain" role="tabpanel" aria-labelledby="pills-blockchain-tab" tabindex="0">
    
    <div class="row g-5 p-3">
      <div class="col-md-12 col-lg-12">
        <form class="needs-validation" novalidate="">
                
          <h4 class="mb-3">Network type</h4>
  
          <div class="my-3">
            <div class="form-check">
              <input id="net-type-mainnet" name="networkType" type="radio" class="form-check-input" [value]="'mainnet'" [(ngModel)]="networkType" [ngModelOptions]="{standalone: true}" (change)="OnNetworkTypeChange()">
              <label class="form-check-label" for="net-type-mainnet">mainnet</label>
            </div>
            <div class="form-check">
              <input id="net-type-testnet" name="networkType" type="radio" class="form-check-input" [value]="'testnet'" [(ngModel)]="networkType" [ngModelOptions]="{standalone: true}" (change)="OnNetworkTypeChange()">
              <label class="form-check-label" for="net-type-testnet">testnet</label>
            </div>
            <div class="form-check">
              <input id="net-type-stagenet" name="networkType" type="radio" class="form-check-input" [value]="'stagenet'" [(ngModel)]="networkType" [ngModelOptions]="{standalone: true}" (change)="OnNetworkTypeChange()">
              <label class="form-check-label" for="net-type-stagenet">stagenet</label>
            </div>
            <div class="form-check">
              <input id="net-type-privnet" name="networkType" type="radio" class="form-check-input" [value]="'privnet'" [(ngModel)]="networkType" [ngModelOptions]="{standalone: true}" (change)="OnNetworkTypeChange()">
              <label class="form-check-label" for="net-type-privnet">privnet</label>
            </div>
          </div>
          
          <hr class="my-4">
          
          <div class="row g-3">
            <h4 class="mb-3">Bootstrap Daemon</h4>

            <div class="col-12">
                <label for="address" class="form-label">Address</label>
                <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="address" placeholder="Use 'auto' to enable automatic discovering and switching" [(ngModel)]="currentSettings.bootstrapDaemonAddress" [ngModelOptions]="{standalone: true}">
                <small class="text-body-secondary">URL of a bootstrap remote daemon that the connected wallets can use while this daemon is still not fully synced.</small>
            </div>
    
            <div class="col-sm-6">
              <label for="firstName" class="form-label">Username</label>
              <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="firstName" placeholder="">
              <small class="text-body-secondary">Specify username for the bootstrap daemon login</small>
            </div>
    
            <div class="col-sm-6">
              <label for="lastName" class="form-label">Password</label>
              <input [disabled]="!canEditNodeSettings" type="password" class="form-control" id="lastName" placeholder="" value="">
              <small class="text-body-secondary">Specify password for the bootstrap daemon login</small>

            </div>

            <div class="col-12">
              <label for="bootstrap-daemon-proxy" class="form-label">Proxy</label>
              <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="bootstrap-daemon-proxy" placeholder="ip:port" [(ngModel)]="currentSettings.bootstrapDaemonProxy" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Socks proxy to use for bootstrap daemon connection</small>
            </div>
    
          </div>
    
          <hr class="my-4">
    
          <div class="row g-3">
              <h4 class="mb-3">Synchronization</h4>
              
              <div class="form-check form-switch col-md-6">
                <label for="sync-enabled" class="form-check-label">Enabled</label>
                <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="sync-enabled" [checked]="!currentSettings.noSync" (change)="OnSyncEnableChange()">
                <br>
                <small class="text-body-secondary">Synchronize the blockchain with other peers</small>
              </div>

              <div *ngIf="!currentSettings.noSync" class="form-check form-switch col-md-6">
                <label for="prune-blockchain" class="form-check-label">Prune Blockchain</label>
                <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="prune-blockchain" [checked]="currentSettings.pruneBlockchain" [(ngModel)]="currentSettings.pruneBlockchain" [ngModelOptions]="{standalone: true}">
                <br>
                <small class="text-body-secondary">Reduce blockchain disk usage</small>
              </div>

              <div *ngIf="!currentSettings.noSync" class="form-check form-switch col-md-6">
                <label for="sync-pruned-blocks" class="form-check-label">Sync pruned blocks</label>
                <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="sync-pruned-blocks" [checked]="currentSettings.syncPrunedBlocks" [(ngModel)]="currentSettings.syncPrunedBlocks" [ngModelOptions]="{standalone: true}">
                <br>
                <small class="text-body-secondary">Allow syncing from nodes with only pruned blocks</small>
              </div>

              <div *ngIf="!currentSettings.noSync" class="form-check form-switch col-md-6">
                <label for="fast-block-sync" class="form-check-label">Fast block sync</label>
                <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="fast-block-sync" [checked]="currentSettings.fastBlockSync" [(ngModel)]="currentSettings.fastBlockSync" [ngModelOptions]="{standalone: true}">
                <br>
                <small class="text-body-secondary">Sync up most of the way by using embedded, known block hashes</small>
              </div>

              <div *ngIf="!currentSettings.noSync" class="form-check form-switch col-md-6">
                <label for="relay-fluffly-blocks" class="form-check-label">Relay fluffy blocks</label>
                <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="relay-fluffly-blocks" [checked]="!currentSettings.noFluffyBlocks" (change)="OnRelayFlufflyBlocksChange()">
                <br>
                <small class="text-body-secondary">Relay blocks as fluffy blocks</small>
              </div>

              <div *ngIf="!currentSettings.noSync" class="form-check form-switch col-md-6">
                <label for="keep-alt-blocks" class="form-check-label">Keep alternative blocks</label>
                <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="keep-alt-blocks" [checked]="currentSettings.keepAltBlocks" [(ngModel)]="currentSettings.keepAltBlocks" [ngModelOptions]="{standalone: true}">
                <br>
                <small class="text-body-secondary">Keep alternative blocks on restart</small>
              </div>

              <div *ngIf="!currentSettings.noSync" class="form-check form-switch col-md-12">
                <label for="sync-on-wifi" class="form-check-label">Sync on Wi-Fi</label>
                <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="sync-on-wifi" [checked]="currentSettings.syncOnWifi" [(ngModel)]="currentSettings.syncOnWifi" [ngModelOptions]="{standalone: true}">
                <br>
                <small class="text-body-secondary">Sync when node is connected to Wi-Fi</small>
              </div>
    
              <div *ngIf="!currentSettings.noSync" class="col-md-3">
                <label for="prep-block-threads" class="form-label">Prep blocks threads</label>
                <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="prep-block-threds" placeholder="4" [(ngModel)]="currentSettings.prepBlocksThreads" [ngModelOptions]="{standalone: true}">
                <small class="text-body-secondary">Max number of threads to use when preparing block hashes in groups</small>
              </div>
    
              <div *ngIf="!currentSettings.noSync" class="col-md-3">
                  <label for="block-sync-size" class="form-label">Block sync size</label>
                  <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="block-sync-size" placeholder="" [(ngModel)]="currentSettings.blockSyncSize" [ngModelOptions]="{standalone: true}">
                  <small class="text-body-secondary">How many blocks to sync at once during chain synchronization (0 = adaptive)</small>
              </div>
      
              <div *ngIf="!currentSettings.noSync" class="col-md-3">
                  <label for="block-download-max-size" class="form-label">Block download max size</label>
                  <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="block-download-max-size" placeholder="" [(ngModel)]="currentSettings.blockDownloadMaxSize" [ngModelOptions]="{standalone: true}">
                  <small class="text-body-secondary">Set maximum size of block download queue in bytes (0 for default)</small>
              </div>

              <div *ngIf="!currentSettings.noSync" class="col-md-3">
                <label for="fixed-difficulty" class="form-label">Fixed difficulty</label>
                <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="fixed-difficulty" placeholder="" [(ngModel)]="currentSettings.fixedDifficulty" [ngModelOptions]="{standalone: true}">
                  <small class="text-body-secondary">Fixed difficulty used for testing (0 for default)</small>
              </div>

              <div *ngIf="!currentSettings.noSync" class="form-check form-switch col-md-12">
                <label for="sync-period-enabled" class="form-check-label">Sync Period Enabled</label>
                <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="sync-period-enabled" [checked]="currentSettings.syncPeriodEnabled" [(ngModel)]="currentSettings.syncPeriodEnabled" [ngModelOptions]="{standalone: true}" [disabled]="currentSettings.noSync">
                <br>
                <small class="text-body-secondary">Enable syncing in certain hours</small>
              </div>

              <div *ngIf="!currentSettings.noSync" class="col-md-4">
                <label for="sync-period-from" class="form-label">From</label>
                <div class="cs-form">
                  <input [disabled]="!canEditNodeSettings" id="sync-period-from" type="time" class="form-control" value="10:05 AM" [disabled]="!currentSettings.syncPeriodEnabled" [(ngModel)]="currentSettings.syncPeriodFrom" [ngModelOptions]="{standalone: true}" />
                </div>
              </div>

              <div *ngIf="!currentSettings.noSync" class="col-md-4">
                <label for="sync-period-to" class="form-label">To</label>
                <div class="cs-form">
                  <input [disabled]="!canEditNodeSettings" id="sync-period-to" type="time" class="form-control" value="10:05 AM" [disabled]="!currentSettings.syncPeriodEnabled" [(ngModel)]="currentSettings.syncPeriodTo" [ngModelOptions]="{standalone: true}"/>
                </div>
              </div>

          </div>

          <hr *ngIf="!currentSettings.noSync" class="my-4">

          <div *ngIf="!currentSettings.noSync" class="row g-3">
            <h4 class="mb-3">Database Sync Mode</h4>
            
            <div class="col-md-2">
              <label for="db-sync-mode-speed" class="form-label"></label>
              <select [disabled]="!canEditNodeSettings" class="form-select" id="db-sync-mode-speed" (ngModelChange)="refreshSyncMode()" [(ngModel)]="databaseSyncSpeed" [ngModelOptions]="{standalone: true}">
                <option [ngValue]="'safe'" [selected]="databaseSyncSpeed === 'safe'">Safe</option>
                <option [ngValue]="'fast'" [selected]="databaseSyncSpeed === 'fast'">Fast</option>
                <option [ngValue]="'fastest'" [selected]="databaseSyncSpeed === 'fastest'">Fastest</option>
              </select>
            </div>
            
            <div class="col-md-2">
              <label for="db-sync-mode" class="form-label"></label>
              <select [disabled]="!canEditNodeSettings" class="form-select" id="db-sync-mode" (ngModelChange)="refreshSyncMode()" [(ngModel)]="databaseSyncMode" [ngModelOptions]="{standalone: true}">
                <option [ngValue]="'sync'" [selected]="databaseSyncMode === 'sync'">Sync</option>
                <option [ngValue]="'async'" [selected]="databaseSyncMode === 'async'">Async</option>
              </select>
            </div>

            <div class="col-md-4">
              <label for="db-sync-mode-n-bytes-or-blocks" class="form-label"></label>
              <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="db-sync-mode-n-bytes-or-blocks" placeholder="" (ngModelChange)="refreshSyncMode()" [(ngModel)]="databaseSyncNBytesOrBlocks" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Number of bytes/blocks</small>
            </div>

            <div class="col-md-2">
              <label for="db-sync-n-per-mode" class="form-label"></label>
              <select [disabled]="!canEditNodeSettings" class="form-select" id="db-sync-n-per-mode" (ngModelChange)="refreshSyncMode()" [(ngModel)]="databaseSyncNPerMode" [ngModelOptions]="{standalone: true}">
                <option [ngValue]="'bytes'" [selected]="databaseSyncNPerMode === 'bytes'">Bytes</option>
                <option [ngValue]="'blocks'" [selected]="databaseSyncNPerMode === 'blocks'">Blocks</option>
              </select>
            </div>

          </div>

        </form>
      </div>
    </div>
  </div>

  <div class="tab-pane fade" id="pills-mining" role="tabpanel" aria-labelledby="pills-mining-tab" tabindex="0">
    <div class="row g-5 p-3">
      <div class="col-md-12 col-lg-12">
        <form class="needs-validation" novalidate="">

          <div class="row g-3">
            <h4 class="mb-3">Mining</h4>
            
            <div class="col-md-10">
              <label for="mining-address" class="form-label">Address</label>
              <input [disabled]="!canEditNodeSettings" type="text" class="form-control" id="mining-address" [(ngModel)]="currentSettings.startMining" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Specify wallet address to mining for. This must be a <strong>standard address</strong>! (aka primary address) It can be neither a subaddress nor integrated address.</small>
            </div>

            <div class="col-md-2">
              <label for="mining-threads" class="form-label">Threads</label>
              <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="mining-threds" placeholder="1" [(ngModel)]="currentSettings.miningThreads" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Specify mining threads count. By default only one thread will be used.</small>
            </div>
            
            <div class="col-md-12">
              <label for="extra-messages-file" class="form-label">Extra messages file</label>
              <div class="input-group mb-3">
                <input [disabled]="!canEditNodeSettings" id="extra-messages-file" type="text" class="form-control form-control-sm" placeholder="" aria-label="Monerod path" aria-describedby="basic-addon2" [value]="currentSettings.extraMessagesFile" readonly>
                <span class="input-group-text" id="basic-addon2"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="chooseExtraMessagesFile()"><i class="bi bi-filetype-txt"></i> Choose file</button></span>            
                <span class="input-group-text" id="basic-addon3"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="removeExtraMessagesFile()" [disabled]="currentSettings.extraMessagesFile === ''"><i class="bi bi-file-x"></i> Remove</button></span>
              </div>
              <small class="text-body-secondary">Specify file for extra messages to include into coinbase transactions.</small>
            </div>

          </div>

          <hr class="my-4">

          <div class="row g-3">
              <h4 class="mb-3">Background mining</h4>
              
              <div class="form-check form-switch col-md-6">
                <label for="bg-mining-enable" class="form-check-label">Enabled</label>
                <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="bg-mining-enable" [checked]="currentSettings.bgMiningEnable" [(ngModel)]="currentSettings.bgMiningEnable" [ngModelOptions]="{standalone: true}">
                <br>
                <small class="text-body-secondary">If enabled, mining will use a small percentage of your system resources to never noticeably slow down your computer. This is intended to encourage people to mine to improve decentralization</small>
              </div>

              <div class="form-check form-switch col-md-6">
                <label for="bg-mining-ignore-battery" class="form-check-label">Ignore battery</label>
                <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="bg-mining-ignore-battery" [checked]="currentSettings.bgMiningIgnoreBattery" [(ngModel)]="currentSettings.bgMiningIgnoreBattery" [ngModelOptions]="{standalone: true}">
                <br>
                <small class="text-body-secondary">If enabled, assumes plugged in when unable to query system power status</small>
              </div>
    
              <div class="col-md-4">
                  <label for="bg-mining-min-idle-interval" class="form-label">Minimum idle interval</label>
                  <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="bg-mining-min-idle-interval" placeholder="" [(ngModel)]="currentSettings.bgMiningMinIdleInterval" [ngModelOptions]="{standalone: true}">
                  <small class="text-body-secondary">Specify min lookback interval in seconds for determining idle state</small>
              </div>
      
              <div class="col-md-4">
                  <label for="bg-mining-idle-threshold" class="form-label">Idle threshold</label>
                  <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="bg-mining-idle-threshold" placeholder="" [(ngModel)]="currentSettings.bgMiningIdleThreshold" [ngModelOptions]="{standalone: true}">
                  <small class="text-body-secondary">Specify minimum avg idle percentage over lookback interval</small>  
              </div>
    
              <div class="col-md-4">
                  <label for="bg-mining-miner-target" class="form-label">Miner target</label>
                  <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="bg-mining-miner-target" placeholder="" [(ngModel)]="currentSettings.bgMiningMinerTarget" [ngModelOptions]="{standalone: true}">
                  <small class="text-body-secondary">Specify maximum percentage cpu use by miners</small>
              </div>
      
          </div>
    
        </form>
      </div>
    </div>
  </div>

  <div class="tab-pane fade" id="pills-logs" role="tabpanel" aria-labelledby="pills-logs-tab" tabindex="0">
    <div class="row g-5 p-3">
      <div class="col-md-12 col-lg-12">
        <form class="needs-validation" novalidate="">
    
          <div class="row g-3">
              <h4 class="mb-3">General</h4>
              
              <div class="col-md-12">
                <label for="log-file" class="form-label">Log file</label>
                <div class="input-group mb-3">
                  <input [disabled]="!canEditNodeSettings" id="extra-messages-file" type="text" class="form-control form-control-sm" placeholder="/var/log/monero/mainnet/monerod.log" aria-label="Log file" aria-describedby="basic-addon2" [value]="currentSettings.logFile" readonly>
                  <span class="input-group-text" id="basic-addon2"><button [disabled]="!canEditNodeSettings" type="button" class="btn btn-secondary btn-sm" (click)="chooseLogFile()"><i class="bi bi-filetype-txt"></i> Choose file</button></span>            
                  <span class="input-group-text" id="basic-addon3"><button type="button" class="btn btn-secondary btn-sm" (click)="removeLogFile()" [disabled]="currentSettings.logFile === '' || !canEditNodeSettings"><i class="bi bi-file-x"></i> Remove</button></span>
                </div>
                <small class="text-body-secondary"><strong>Full path</strong> to the log file (mind file permissions).</small>
              </div>

              <div class="col-md-4">
                <label for="log-level" class="form-label">Log level</label>
                <select [disabled]="!canEditNodeSettings" class="form-select" id="log-level" [(ngModel)]="currentSettings.logLevel" [ngModelOptions]="{standalone: true}">
                  <option [ngValue]="0">0</option>
                  <option [ngValue]="1">1</option>
                  <option [ngValue]="2">2</option>
                  <option [ngValue]="3">3</option>
                  <option [ngValue]="4">4</option>
                  <small class="text-body-secondary">	0-4 with 0 being minimal logging and 4 being full tracing. Defaults to 0. These are general presets and do not directly map to severity levels. For example, even with minimal 0, you may see some most important INFO entries</small>
                </select>
              </div>
    
              <div class="col-md-4">
                  <label for="max-log-file-size" class="form-label">Max log file size</label>
                  <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="max-log-file-size" placeholder="104850000" [(ngModel)]="currentSettings.maxLogFileSize" [ngModelOptions]="{standalone: true}">
                  <small class="text-body-secondary">Specify maximum log file size [B]</small>
              </div>
      
              <div class="col-md-4">
                  <label for="max-log-files" class="form-label">Max log files</label>
                  <input [disabled]="!canEditNodeSettings" type="number" min="0" class="form-control" id="max-log-files" placeholder="50" [(ngModel)]="currentSettings.maxLogFiles" [ngModelOptions]="{standalone: true}">
                  <small class="text-body-secondary">Specify maximum number of rotated log files to be saved (no limit by setting to 0)</small>  
              </div>  
          </div>
    
        </form>
      </div>
    </div>
  </div>

  <div class="tab-pane fade" id="pills-tor" role="tabpanel" aria-labelledby="pills-tor-tab" tabindex="0">
    <div class="row g-5 p-3">
      <div class="col-md-12 col-lg-12">
        <form class="needs-validation" novalidate="">    
          <h4 class="mb-3">TOR Service</h4>          
          <div class="row g-3">
            <div class="form-check form-switch col-md-6">
              <label for="tor-service-enabled" class="form-check-label">Enabled</label>
              <input (change)="onTorServiceEnabledChange()" [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="sync-period-enabled" [checked]="currentTorSettings.enabled" [(ngModel)]="currentTorSettings.enabled" [ngModelOptions]="{standalone: true}">
              <br>
              <small class="text-body-secondary">Enable TOR Service</small>
            </div>

            <div *ngIf="currentTorSettings.enabled" class="col-md-12">
              <label for="tor-path" class="form-label">Tor path</label>
              <div class="input-group mb-3">
                <input id="tor-path" type="text" class="form-control form-control-sm" placeholder="" aria-label="Tor path" aria-describedby="basic-addon2" [value]="currentTorSettings.path" readonly>
                <span class="input-group-text" id="basic-addon2"><button type="button" class="btn btn-secondary btn-sm" (click)="chooseTorFile()"><i class="bi bi-filetype-exe"></i> Choose executable</button></span>            
                <span class="input-group-text" id="basic-addon3"><button type="button" class="btn btn-secondary btn-sm" (click)="removeTorFile()" [disabled]="currentTorSettings.path === ''"><i class="bi bi-file-x"></i> Remove</button></span>
              </div>
              <small class="text-body-secondary">Path to tor bundle executable</small>
            </div>

            <div *ngIf="currentTorSettings.enabled"class="form-check form-switch col-md-4">
              <label for="tor-allow-incoming-connections" class="form-check-label">Allow incoming connections</label>
              <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="tor-allow-incoming-connections" [checked]="currentTorSettings.allowIncomingConnections" [(ngModel)]="currentTorSettings.allowIncomingConnections" [ngModelOptions]="{standalone: true}" [disabled]="!currentTorSettings.enabled">
              <br>
              <small class="text-body-secondary">Allow incoming connections to the TOR service</small>
            </div>
    
            <div *ngIf="currentTorSettings.enabled" class="form-check form-switch col-md-4">
              <label for="tor-tx-proxy-enabled" class="form-check-label">Tx proxy</label>
              <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="tor-tx-proxy-enabled" [checked]="currentTorSettings.txProxyEnabled" [(ngModel)]="currentTorSettings.txProxyEnabled" [ngModelOptions]="{standalone: true}" [disabled]="!currentTorSettings.enabled">
              <br>
              <small class="text-body-secondary">Enable tx proxy through TOR service</small>
            </div>
            
            <div *ngIf="currentTorSettings.enabled" class="form-check form-switch col-md-4">
              <label for="tor-proxy-enabled" class="form-check-label">Proxy all network connections</label>
              <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="tor-proxy-enabled" [checked]="currentTorSettings.proxyAllNetConnections" [(ngModel)]="currentTorSettings.proxyAllNetConnections" [ngModelOptions]="{standalone: true}" [disabled]="!currentTorSettings.enabled">
              <br>
              <small class="text-body-secondary">Enabling this setting sends all traffic through TOR service</small>
            </div>
          </div>
          
          <hr *ngIf="!currentTorSettings.enabled" class="my-4">

          <div *ngIf="!currentTorSettings.enabled" class="row g-3">
            <h4 class="mb-3">TOR Tx Proxy</h4>
            
            <div class="col-4">
              <label for="tor-tx-proxy-ip" class="form-label">Socks IP</label>
              <input (input)="onTorTxProxyChange()" [disabled]="!canEditNodeSettings || currentTorSettings.enabled" type="text" class="form-control" id="tx-proxy" placeholder="127.0.0.1" [(ngModel)]="torTxProxyIp" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">
                Socks proxy ip.
              </small>
            </div>

            <div class="col-md-2">
              <label for="tor-tx-proxy-port" class="form-label">Socks Port</label>
              <input (change)="onTorTxProxyChange()" [disabled]="!canEditNodeSettings || currentTorSettings.enabled" type="number" min="0" class="form-control" id="tor-tx-proxy-port" placeholder="9050" [(ngModel)]="torTxProxyPort" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Socks proxy port</small>
            </div>

            <div class="col-md-2">
              <label for="tor-tx-proxy-max-connections" class="form-label">Max Connections</label>
              <input (change)="onTorTxProxyChange()" [disabled]="!canEditNodeSettings || currentTorSettings.enabled" type="number" min="0" class="form-control" id="tor-tx-proxy-max-connections" placeholder="10" [(ngModel)]="torTxProxyMaxConnections" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Max connections</small>
            </div>

            <div class="form-check form-switch col-md-4">
              <label for="tor-tx-proxy-disable-noise" class="form-check-label">Disable Noise</label>
              <input (change)="onTorTxProxyChange()" [disabled]="!canEditNodeSettings || currentTorSettings.enabled" class="form-control form-check-input" type="checkbox" role="switch" id="sync-period-enabled" [checked]="torTxProxyDisableNoise" [(ngModel)]="torTxProxyDisableNoise" [ngModelOptions]="{standalone: true}" [disabled]="currentSettings.noSync">
              <br>
              <small class="text-body-secondary">Tx will be <i>fluffed</i> to outbound TOR and I2P peers, and the receiving hidden service will immediately fluff the transaction to ipv4/6 peers. This will speed up tx broadcast.</small>
            </div>

          </div>

          <hr *ngIf="!currentTorSettings.enabled" class="my-4">

          <div *ngIf="!currentTorSettings.enabled" class="row g-3">
            <h4 class="mb-3">TOR Anonymous Inbound</h4>
            
            <div class="col-10">
              <label for="tor-anonymous-inbound-address" class="form-label">Inbound Address</label>
              <input (input)="onTorAnonymousInboundChange()" [disabled]="!canEditNodeSettings|| currentTorSettings.enabled" type="text" class="form-control" id="tor-anonymous-inbound-address" placeholder="...sxakefmed.onion" [(ngModel)]="torAnonymousInboundAddress" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">
                Specify inbound hidden service address for receiving incoming TOR connections
              </small>
            </div>

            <div class="col-md-2">
              <label for="tor-anonymous-inbound-port" class="form-label">Inbound port</label>
              <input (change)="onTorAnonymousInboundChange()" [disabled]="!canEditNodeSettings || currentTorSettings.enabled" type="number" min="0" class="form-control" id="tor-anonymous-inbound-port" placeholder="28083" [(ngModel)]="torAnonymousInboundPort" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">
                Specify inbound hidden service port for receiving incoming TOR connections
              </small>
            </div>
            
            <div class="col-8">
              <label for="tor-anonymous-inbound-forward-ip" class="form-label">Forward Ip</label>
              <input (input)="onTorAnonymousInboundChange()" [disabled]="!canEditNodeSettings || currentTorSettings.enabled" type="text" class="form-control" id="tor-anonymous-inbound-forward-ip" placeholder="127.0.0.1" [(ngModel)]="torAnonymousInboundForwardIp" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">
                Forward node ip
              </small>
            </div>

            <div class="col-md-2">
              <label for="tor-anonymous-inbound-forward-port" class="form-label">Forward Port</label>
              <input (change)="onTorAnonymousInboundChange()" [disabled]="!canEditNodeSettings || currentTorSettings.enabled" type="number" min="0" class="form-control" id="tor-anonymous-inbound-forward-port" placeholder="28083" [(ngModel)]="torAnonymousInboundForwardPort" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Forward node port</small>
            </div>

            <div class="col-md-2">
              <label for="tor-anonymous-inbound-max-connections" class="form-label">Max connections</label>
              <input (change)="onTorAnonymousInboundChange()" [disabled]="!canEditNodeSettings || currentTorSettings.enabled" type="number" min="-1" class="form-control" id="tor-anonymous-inbound-max-connections" placeholder="10" [(ngModel)]="torAnonymousInboundMaxConnections" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Max connections</small>
            </div>

          </div>
    
        </form>
      </div>
    </div>
  </div>


  <div class="tab-pane fade" id="pills-i2p" role="tabpanel" aria-labelledby="pills-i2p-tab" tabindex="0">
    <div class="row g-5 p-3">
      <div class="col-md-12 col-lg-12">
        <form class="needs-validation" novalidate="">    
          <h4 class="mb-3">I2P Service</h4>          
          <div class="row g-3">
            <div class="form-check form-switch col-md-6">
              <label for="i2p-service-enabled" class="form-check-label">Enabled</label>
              <input (change)="onI2pServiceEnabledChange()" [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="sync-period-enabled" [checked]="currentI2pdSettings.enabled" [(ngModel)]="currentI2pdSettings.enabled" [ngModelOptions]="{standalone: true}">
              <br>
              <small class="text-body-secondary">Enable I2P Service</small>
            </div>

            <div *ngIf="currentI2pdSettings.enabled" class="col-md-12">
              <label for="i2pd-path" class="form-label">I2pd path</label>
              <div class="input-group mb-3">
                <input id="i2pd-path" type="text" class="form-control form-control-sm" placeholder="" aria-label="I2pd path" aria-describedby="basic-addon2" [value]="currentI2pdSettings.path" readonly>
                <span class="input-group-text" id="basic-addon2"><button type="button" class="btn btn-secondary btn-sm" (click)="chooseI2pdFile()"><i class="bi bi-filetype-exe"></i> Choose executable</button></span>            
                <span class="input-group-text" id="basic-addon3"><button type="button" class="btn btn-secondary btn-sm" (click)="removeI2pdFile()" [disabled]="currentI2pdSettings.path === ''"><i class="bi bi-file-x"></i> Remove</button></span>
              </div>
              <small class="text-body-secondary">Path to i2pd executable</small>
            </div>

            <div *ngIf="currentI2pdSettings.enabled" class="form-check form-switch col-md-4">
              <label for="i2p-allow-incoming-connections" class="form-check-label">Allow incoming connections</label>
              <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="i2p-allow-incoming-connections" [checked]="currentI2pdSettings.allowIncomingConnections" [(ngModel)]="currentI2pdSettings.allowIncomingConnections" [ngModelOptions]="{standalone: true}" [disabled]="!currentI2pdSettings.enabled">
              <br>
              <small class="text-body-secondary">Allow incoming connections to the I2P service</small>
            </div>
    
            <div *ngIf="currentI2pdSettings.enabled" class="form-check form-switch col-md-4">
              <label for="i2p-tx-proxy-enabled" class="form-check-label">Tx proxy</label>
              <input [disabled]="!canEditNodeSettings" class="form-control form-check-input" type="checkbox" role="switch" id="i2p-tx-proxy-enabled" [checked]="currentI2pdSettings.txProxyEnabled" [(ngModel)]="currentI2pdSettings.txProxyEnabled" [ngModelOptions]="{standalone: true}" [disabled]="!currentI2pdSettings.enabled">
              <br>
              <small class="text-body-secondary">Enable tx proxy through I2P service</small>
            </div>

            <div *ngIf="currentI2pdSettings.enabled" class="form-check form-switch col-md-4">
              <label for="i2p-tx-proxy-enabled" class="form-check-label">TOR as outproxy</label>
              <input [disabled]="!canEditNodeSettings || !currentI2pdSettings.enabled || !currentTorSettings.enabled" class="form-control form-check-input" type="checkbox" role="switch" id="i2p-tx-proxy-enabled" [checked]="currentI2pdSettings.torAsOutproxy" [(ngModel)]="currentI2pdSettings.torAsOutproxy" [ngModelOptions]="{standalone: true}">
              <br>
              <small class="text-body-secondary">Enable blockchain synchronization through TOR service</small>
            </div>
            
            <div *ngIf="currentI2pdSettings.enabled && !currentI2pdSettings.torAsOutproxy" class="col-8">
              <label for="outproxy" class="form-label">Outproxy IP</label>
              <input (input)="onI2pOutproxyChange()" [disabled]="!canEditNodeSettings || !currentI2pdSettings.enabled" type="text" class="form-control" id="outproxy" placeholder="127.0.0.1" [(ngModel)]="i2pOutproxyIp" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">
                Outproxy ip
              </small>
            </div>

            <div *ngIf="currentI2pdSettings.enabled && !currentI2pdSettings.torAsOutproxy" class="col-md-4">
              <label for="outproxy-port" class="form-label">Outproxy Port</label>
              <input (change)="onI2pOutproxyChange()" [disabled]="!canEditNodeSettings || !currentI2pdSettings.enabled" type="number" min="0" class="form-control" id="outproxy-port" placeholder="9050" [(ngModel)]="i2pOutproxyPort" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Outproxy port</small>
            </div>
            
          </div>
          
          <hr *ngIf="!currentI2pdSettings.enabled" class="my-4">
          <h4 *ngIf="!currentI2pdSettings.enabled" class="mb-3">I2P Tx Proxy</h4>
          <div *ngIf="!currentI2pdSettings.enabled" class="row g-3">

            <div class="col-4">
              <label for="i2p-tx-proxy-ip" class="form-label">Socks IP</label>
              <input (input)="onI2pTxProxyChange()" [disabled]="!canEditNodeSettings || currentI2pdSettings.enabled" type="text" class="form-control" id="tx-proxy" placeholder="127.0.0.1" [(ngModel)]="i2pTxProxyIp" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">
                Socks proxy ip
              </small>
            </div>

            <div class="col-md-2">
              <label for="i2p-tx-proxy-port" class="form-label">Socks Port</label>
              <input (change)="onI2pTxProxyChange()" [disabled]="!canEditNodeSettings || currentI2pdSettings.enabled" type="number" min="0" class="form-control" id="i2p-tx-proxy-port" placeholder="4447" [(ngModel)]="i2pTxProxyPort" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Socks proxy port</small>
            </div>

            <div class="col-md-2">
              <label for="i2p-tx-proxy-max-connections" class="form-label">Max Connections</label>
              <input (change)="onI2pTxProxyChange()" [disabled]="!canEditNodeSettings || currentI2pdSettings.enabled" type="number" min="0" class="form-control" id="i2p-tx-proxy-max-connections" placeholder="10" [(ngModel)]="i2pTxProxyMaxConnections" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Max connections</small>
            </div>

            <div class="form-check form-switch col-md-4">
              <label for="i2p-tx-proxy-disable-noise" class="form-check-label">Disable Noise</label>
              <input (change)="onI2pTxProxyChange()" [disabled]="!canEditNodeSettings || currentI2pdSettings.enabled" class="form-control form-check-input" type="checkbox" role="switch" id="sync-period-enabled" [checked]="i2pTxProxyDisableNoise" [(ngModel)]="i2pTxProxyDisableNoise" [ngModelOptions]="{standalone: true}" [disabled]="currentSettings.noSync">
              <br>
              <small class="text-body-secondary">Tx will be <i>fluffed</i> to outbound I2P and I2P peers, and the receiving hidden service will immediately fluff the transaction to ipv4/6 peers. This will speed up tx broadcast.</small>
            </div>

          </div>

          <hr *ngIf="!currentI2pdSettings.enabled" class="my-4">

          <div *ngIf="!currentI2pdSettings.enabled" class="row g-3">
            <h4 class="mb-3">I2P Anonymous Inbound</h4>
            
            <div class="col-12">
              <label for="i2p-anonymous-inbound-address" class="form-label">Inbound Address</label>
              <input (input)="onI2pAnonymousInboundChange()" [disabled]="!canEditNodeSettings || currentI2pdSettings.enabled" type="text" class="form-control" id="i2p-anonymous-inbound-address" placeholder="...sxakefmed.i2p" [(ngModel)]="i2pAnonymousInboundAddress" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">
                Specify inbound hidden service address for receiving incoming I2P connections
              </small>
            </div>
            
            <div class="col-8">
              <label for="i2p-anonymous-inbound-forward-ip" class="form-label">Forward IP</label>
              <input (input)="onI2pAnonymousInboundChange()" [disabled]="!canEditNodeSettings || currentI2pdSettings.enabled" type="text" class="form-control" id="i2p-anonymous-inbound-forward-ip" placeholder="127.0.0.1" [(ngModel)]="i2pAnonymousInboundForwardIp" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">
                Forward node ip
              </small>
            </div>

            <div class="col-md-2">
              <label for="i2p-anonymous-inbound-forward-port" class="form-label">Forward Port</label>
              <input (change)="onI2pAnonymousInboundChange()" [disabled]="!canEditNodeSettings || currentI2pdSettings.enabled" type="number" min="0" class="form-control" id="i2p-anonymous-inbound-forward-port" placeholder="28083" [(ngModel)]="i2pAnonymousInboundForwardPort" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Forward node port</small>
            </div>

            <div class="col-md-2">
              <label for="i2p-anonymous-inbound-max-connections" class="form-label">Max Connections</label>
              <input (change)="onI2pAnonymousInboundChange()" [disabled]="!canEditNodeSettings || currentI2pdSettings.enabled" type="number" min="-1" class="form-control" id="i2p-anonymous-inbound-max-connections" placeholder="10" [(ngModel)]="i2pAnonymousInboundMaxConnections" [ngModelOptions]="{standalone: true}">
              <small class="text-body-secondary">Max connections</small>
            </div>

          </div>
    
        </form>
      </div>
    </div>
  </div>

  <hr class="my-4">

  <button *ngIf="!savingChanges" class="w-100 btn btn-primary btn-lg" type="submit" [disabled]="saveDisabled" (click)="OnSave()">Save</button>
  <button *ngIf="savingChanges" class="w-100 btn btn-primary btn-lg" type="button" disabled>
    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
    Saving changes
  </button>
</div>
